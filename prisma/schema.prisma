// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
  // provider = "sqlite"
  // url      = "file:./dev.db"
}

model Member {
  id    String  @id @default(uuid())
  email String  @unique

  name  String
  family_name String
  phone_number String @unique
  verified_phone_number Boolean @default(false)
  student_number Int @unique
  dormitory_student Boolean @default(false)
  dormitory String?
  interests String[]
  cooperation_areas String[]
  activity_records String?
  role Role @default(User) 

  school_profile SchoolProfile[]
}

enum Role {
  User
  Admin
}

enum Degree {
  BA
  MA
  PHD
}

model SchoolProfile {
  id Int @id @default(autoincrement())

  degree Degree
  univercity String?
  college String?
  field String?
  entrance String?
  orientation String?

  member Member @relation(fields: [memberId], references: [id])
  memberId String
}

model AuthCode {
  id Int @id @default(autoincrement())

  phone_number String @unique
  pin String
  expires_after DateTime
}
